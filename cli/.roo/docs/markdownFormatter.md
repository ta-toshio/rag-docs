### **Markdown フォーマット統一処理仕様書**

#### **1. 概要**
`formatMarkdown` 関数は、Turndown によって変換された Markdown を統一的なフォーマットに修正する処理を行います。  
これにより、リストや番号付きリストの表記揺れを防ぎ、Markdown の可読性と一貫性を向上させます。

---

#### **2. 目的**
- 番号付きリストの表記を統一（余分なスペースを削除）
- 箇条書きリストの表記を統一（`-` の後の余分なスペースを削除）
- Markdown の不要な空白を削除

---

#### **3. 修正内容**
| 修正対象 | 修正内容 | 具体的な処理 |
|----------|----------|--------------|
| **番号付きリスト** | `1.  Item` のような **余分なスペース** を修正 | `(\d+\.)\s+ → \1 ` |
| **箇条書きリスト** | `-   Item` のような **余分なスペース** を修正 | `(\s*-)\s+ → \1 ` |
| **全体のトリム** | Markdown の前後の **不要な空白を削除** | `trim()` |

---

#### **4. 実装コード**
```typescript
function formatMarkdown(markdown: string): string {
  // 番号付きリストの余分なスペースを1つに統一
  markdown = markdown.replace(/^(\d+\.)\s+/gm, '$1 ');

  // 箇条書きリストの余分なスペースを1つに統一
  markdown = markdown.replace(/^(\s*-)\s+/gm, '$1 ');

  // 余計な空白の削除
  return markdown.trim();
}
```

---

#### **5. 入出力例**
##### **(1) 番号付きリスト**
**修正前:**
```
1.  First item
2.   Second item
```
**修正後:**
```
1. First item
2. Second item
```

##### **(2) 箇条書きリスト**
**修正前:**
```
-   Item A
  -   Sub-item A1
```
**修正後:**
```
- Item A
  - Sub-item A1
```

##### **(3) 不要な空白の削除**
**修正前:**
```

# Title

Paragraph with extra spaces.    

```
**修正後:**
```
# Title

Paragraph with extra spaces.
```

---

#### **6. 想定される影響**
- **リストの表記が統一され、可読性が向上**
- **Markdown の不要なスペースが削減され、出力が整理される**
- **GitHub Flavored Markdown (GFM) に適したフォーマットになる**

---

#### **7. 今後の拡張**
- コードブロック (` ``` `) のインデント統一
- テーブル (`| Header |`) のカラム揃え
- 改行ルール (`\n\n` の統一)

